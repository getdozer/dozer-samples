app_name: snowflake-test
connections:
  - config: !Snowflake
      server: "{{SN_SERVER}}"
      user: "{{SN_USER}}"
      password: "{{SN_PASSWORD}}"
      database: DOZER_SAMPLE_DATA
      schema: PUBLIC
      warehouse: "{{SN_WAREHOUSE}}"
    name: sn_data

sources:
  - name: customers
    connection: !Ref sn_data
    table_name: CUSTOMERS
    columns:

sql: |

  -- select C_CUSTOMER_SK, c_customer_id from customer limit 100;

  SELECT O_ORDERKEY, O_CUSTKEY, O_ORDERSTATUS, O_TOTALPRICE, O_ORDERDATE, O_ORDERPRIORITY, O_CLERK, O_SHIPPRIORITY, O_COMMENT
  INTO orders_data
  FROM orders;

endpoints:
  - name: orders
    path: /orders
    table_name: orders_data
    index:
      primary_key:
        - O_ORDERKEY
